!function e(n,t,o){function r(i,c){if(!t[i]){if(!n[i]){var l="function"==typeof require&&require;if(!c&&l)return l(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var s=t[i]={exports:{}};n[i][0].call(s.exports,function(e){var t=n[i][1][e];return r(t?t:e)},s,s.exports,e,n,t,o)}return t[i].exports}for(var a="function"==typeof require&&require,i=0;i<o.length;i++)r(o[i]);return r}({1:[function(e,n,t){"use strict";window.onload=function(){var e=new fabric.Canvas("canvas"),n=io(),t=["body","head","nose","mouth","eye_l","eye_r","cheek_l","cheek_r","arm_l","arm_r","leg_l","leg_r"],o={};fabric.Object.prototype.getZIndex=function(){return this.canvas.getObjects().indexOf(this)},t.forEach(function(t){var r={},a=new fabric.Image(document.getElementById(t),r);["moving","scaling","rotating"].forEach(function(e){a.on(e,function(){a.bringToFront(),n.emit("part_change",{target:t,params:{top:a.getTop(),left:a.getLeft(),angle:a.getAngle(),scaleX:a.getScaleX(),scaleY:a.getScaleY(),originX:"center",originY:"center"}})})}),o[t]=a,e.add(a),n.emit("part_loaded",t)}),n.on("part_change",function(n,t){o[n].set(t),o[n].setCoords(),o[n].bringToFront(),e.renderAll()}),n.on("redirect_to_snapshot",function(e){document.getElementById("loading").style.display="none",window.open("/snapshot/"+e,"_blank")}),document.getElementById("reset_button").onclick=function(){n.emit("parts_reset")},document.getElementById("snapshot_button").onclick=function(){document.getElementById("loading").style.display="block";var e={};t.forEach(function(n){e[n]=o[n].getZIndex()}),n.emit("snapshot_taken",e)}}},{}]},{},[1]);